<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="plasTeX" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<title>: setpri (2156)</title>

<link href="sect0109.html" title="sleep (2066)" rel="next" />
<link href="sect0107.html" title="swtch (2178)" rel="prev" />
<link href="sect0098.html" title="Process Management" rel="up" />
<link rel="stylesheet" href="styles/styles.css" />
</head>
<body>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0107.html" title="swtch (2178)"><img alt="Previous: swtch (2178)" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0098.html" title="Process Management"><img alt="Up: Process Management" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sect0109.html" title="sleep (2066)"><img alt="Next: sleep (2066)" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">&nbsp;</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>


<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<div class="breadcrumbs">
<span>
<span>
<a href="index.html"></a> <b>:</b>
</span>

</span><span>
<span>
<a href="sect0098.html">Process Management</a> <b>:</b>
</span>

</span><span>

<span>
<b class="current">setpri (2156)</b>
</span>
</span>
<hr />
</div>

<div><h2 id="a0000000109">8.10 setpri (2156)</h2>
<dl class="description">

    <dt>2161:</dt>
    <dd><p>Process priorities are calculated according to the formula </p><div class="tabbing">
<img src="images/img-0012.png" alt="\begin{tabbing}  priority = min(\=  127,\\ \&gt;  (time used + PUSER + p\_ nice))\\ \end{tabbing}" style="width:&images/img-0012.png-width;&px;; height:&images/img-0012.png-height;&px;" class="tabbing gen" />
</div><p>where </p><dl class="description">

    <dt>(1)</dt>
    <dd><p>time used = accumulated central processor time (usually since the process was last swapped in), measured in clock ticks divided by 16 i.e. thirds of a second. (More on this later when we discuss the clock interrupt.); </p></dd>

    <dt>(2)</dt>
    <dd><p>PUSER == 100; </p></dd>

    <dt>(3)</dt>
    <dd><p>“p_nice” is a parameter used to bias the process priority. It is normally positive and hence reduces the process’s effective precedence. </p></dd>

</dl></dd>

</dl><p>Note the somewhat confusing convention in UNIX that the lower the priority, the higher the precedence. Thus a priority of –10 beats a priority of 100 every time. </p><dl class="description">

    <dt>2165:</dt>
    <dd><p>Set the rescheduling flag if the process, whose priority has just been recalculated, has less precedence than the current process. </p></dd>

</dl><p>The sense of the test on line 2165 is surprising, especially when it is compared with line 2141. We leave it to the reader to satisfy himself that this is not an error. (Hint: look at the parameters for the calls on “setpri”.) </p></div>





<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0107.html" title="swtch (2178)"><img alt="Previous: swtch (2178)" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0098.html" title="Process Management"><img alt="Up: Process Management" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sect0109.html" title="sleep (2066)"><img alt="Next: sleep (2066)" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">&nbsp;</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>


<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

</body>
</html>