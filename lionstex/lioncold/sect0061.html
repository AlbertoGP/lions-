<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="plasTeX" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<title>: The File ‘malloc.c’</title>

<link href="sect0062.html" title="Rules for List Maintenance" rel="next" />
<link href="sect0060.html" title="Two Files" rel="prev" />
<link href="sect0060.html" title="Two Files" rel="up" />
<link rel="stylesheet" href="styles/styles.css" />
</head>
<body>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0060.html" title="Two Files"><img alt="Previous: Two Files" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0060.html" title="Two Files"><img alt="Up: Two Files" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sect0062.html" title="Rules for List Maintenance"><img alt="Next: Rules for List Maintenance" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">&nbsp;</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>


<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<div class="breadcrumbs">
<span>
<span>
<a href="index.html"></a> <b>:</b>
</span>

</span><span>
<span>
<a href="sect0060.html">Two Files</a> <b>:</b>
</span>

</span><span>

<span>
<b class="current">The File ‘malloc.c’</b>
</span>
</span>
<hr />
</div>

<div><h2 id="a0000000062">5.1 The File ‘malloc.c’</h2>
<p>This file is found on Sheet 25 of the Source code, and consists of just two procedures: </p><pre>
   malloc (2528)   mfree (2556)
</pre><p>These are concerned with the allocation and subsequent release of two kinds of memory resources, namely: </p><dl class="description">

    <dt>main memory</dt>
    <dd><p>in units of 32 words (64 bytes); </p></dd>

    <dt>disk swap area</dt>
    <dd><p>in units of 256 words (512 bytes). </p></dd>

</dl><p>For each of these two kinds of resource, a list of available areas is maintained within a resource “map” (either “coremap” or “swapmap”). A pointer to the appropriate resource “map” is always passed to “malloc” and “mfree” so that the routines themselves do not have to know the kind of resource with which they are dealing. </p><p>Each of “coremap” and “swapmap” is an array of structures of the type “map” as declared at line 2515. This structure consists of two character pointers i.e. two unsigned integers. </p><p>The declarations of “coremap” and “swapmap” are on lines 0203, 0204. Here the “map” structure is completely ignored – a regrettable programming short-cut which is possible because it is not detected by the loader. Thus the actual numbers of list elements in “coremap” and “swapmap” are “CMAPSIZ/2” and “SMAPSIZ/2” respectively. </p></div>





<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0060.html" title="Two Files"><img alt="Previous: Two Files" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0060.html" title="Two Files"><img alt="Up: Two Files" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sect0062.html" title="Rules for List Maintenance"><img alt="Next: Rules for List Maintenance" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">&nbsp;</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>


<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

</body>
</html>