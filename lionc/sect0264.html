<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="plasTeX" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<title>: iupdat (7374)</title>

<link href="sect0265.html" title="Pipes" rel="next" />
<link href="sect0263.html" title="ifree (7134)" rel="prev" />
<link href="sect0247.html" title="File Systems" rel="up" />
<link rel="stylesheet" href="styles/styles.css" />
</head>
<body>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0263.html" title="ifree (7134)"><img alt="Previous: ifree (7134)" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0247.html" title="File Systems"><img alt="Up: File Systems" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sect0265.html" title="Pipes"><img alt="Next: Pipes" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">&nbsp;</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>


<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<div class="breadcrumbs">
<span>
<span>
<a href="index.html"></a> <b>:</b>
</span>

</span><span>
<span>
<a href="sect0247.html">File Systems</a> <b>:</b>
</span>

</span><span>

<span>
<b class="current">iupdat (7374)</b>
</span>
</span>
<hr />
</div>

<div><h2 id="a0000000265">20.17 iupdat (7374)</h2>
<p>This procedure is called by “statl” (6050), “update” (7226) and “iput” (7357) to revise a particular “inode” entry on a FSV. It does nothing if the corresponding core “inode” is not flagged (“IUPD” or “IACC”); </p><p>The “IUPD” flag may be set by one of </p><pre>
  unlink (3530)        bmap (6452,6467)
  chmod  (3570)        itrunc  (7448)
  chown  (3583)        maknode (7462)
  link   (5942)        namei   (7609)
  writei (6285,6318)   pipe    (7751)
</pre><p>The “IACC” flag may be set by one of </p><pre>
  readi  (6232)       maknode (7462)
  writei (6285)       pipe    (7751)
</pre><p>The flags are reset by “iput” (7359). </p><dl class="description">

    <a href="../all.html#line7383" target="source" <dt>7383:</dt></a>
    <dd><p>Forget it, if the FSV has been mounted as “read only”; </p></dd>

    <a href="../all.html#line7386" target="source" <dt>7386:</dt></a>
    <dd><p>Read the appropriate block containing the FSV “inode” entry. As observed earlier with respect to “iget”, note the the use of “bread” instead of “readi”, the assumption that the “inode” table begins at block #2 and the convention that valid “inode” numbers begin at one; </p></dd>

    <a href="../all.html#line7389" target="source" <dt>7389:</dt></a>
    <dd><p>Copy the relevant information from the core “inode”; </p></dd>

    <a href="../all.html#line7391" target="source" <dt>7391:</dt></a>
    <dd><p>If appropriate, update the time of last access; </p></dd>

    <a href="../all.html#line7396" target="source" <dt>7396:</dt></a>
    <dd><p>If appropriate, update the time of last modification; </p></dd>

    <a href="../all.html#line7400" target="source" <dt>7400:</dt></a>
    <dd><p>Write the updated block back to the FSV. </p></dd>

</dl></div>





<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0263.html" title="ifree (7134)"><img alt="Previous: ifree (7134)" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0247.html" title="File Systems"><img alt="Up: File Systems" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sect0265.html" title="Pipes"><img alt="Next: Pipes" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">&nbsp;</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>


<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

</body>
</html>